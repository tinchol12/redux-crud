(this.webpackJsonpcrudredux=this.webpackJsonpcrudredux||[]).push([[0],{38:function(e,t,r){e.exports=r(67)},43:function(e,t,r){},67:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(16),c=r.n(o),l=(r(43),r(13)),u=r(12),i=r(3),s=r(11),d=r(34),m=r(37),O=r(2),E={productos:[],error:null,loading:!1,producto:{}},R={error:null},p=Object(s.c)({productos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AGREGAR_PRODUCTO":return Object(O.a)({},e,{error:null});case"AGREGAR_PRODUCTO_EXITO":return Object(O.a)({},e,{error:null,productos:[].concat(Object(m.a)(e.productos),[t.payload])});case"AGREGAR_PRODUCTO_ERROR":return Object(O.a)({},e,{error:!0});case"COMENZAR_DESCARGA_PRODUCTOS":return Object(O.a)({},e,{loading:!0,producto:{}});case"DESCARGA_PRODUCTOS_EXITOSA":return Object(O.a)({},e,{productos:t.payload,loading:!1,error:!1,producto:{}});case"DESCARGA_PRODUCTOS_ERROR":return Object(O.a)({},e,{productos:[],error:!0,loading:!1});case"OBTENER_PRODUCTO_ELIMINAR":return Object(O.a)({},e);case"PRODUCTO_ELIMINADO_EXITO":return Object(O.a)({},e,{error:null,producto:e.producto.filter((function(e){return e.id!==t.payload}))});case"PRODUCTO_ELIMINADO_ERROR":return Object(O.a)({},e,{error:!0});case"OBTENER_PRODUCTO_EDITAR":return Object(O.a)({},e,{error:null});case"PRODUCTO_EDITAR_EXITO":return Object(O.a)({},e,{error:null,producto:t.payload});case"PRODUCTO_EDITAR_ERROR":return Object(O.a)({},e,{error:!0});case"COMENZAR_EDICION_PRODUCTO":return Object(O.a)({},e,{error:null});case"PRODUCTO_EDITADO_EXITO":return Object(O.a)({},e,{error:null,productos:e.productos.map((function(e){return e.id===t.payload.id?e=t.payload:e}))});case"PRODUCTO_EDITADO_EXITO":return Object(O.a)({},e,{error:!0});default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"VALIDAR_FORMULARIO":case"VALIDAR_FORMULARIO_EXITO":return Object(O.a)({},e,{error:null});case"VALIDAR_FORMULARIO_ERROR":return Object(O.a)({},e,{error:!0});default:return e}}}),b=[d.a],f=Object(s.e)(p,{},Object(s.d)(s.a.apply(void 0,b),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),_=function(){return a.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary justify-content-between"},a.a.createElement("div",{className:"container"},a.a.createElement("h1",null,a.a.createElement(l.b,{to:"/",className:"text-light"},"CRUD - React, Redux Hooks, REST API y Axios")),a.a.createElement(l.b,{to:"/productos/nuevo",className:"btn btn-danger nuevo-post d-block d-md-inline-block"},"Agregar Producto +")))},A=r(14),D=r.n(A),T=r(36),v=r.n(T).a.create({baseURL:"https://my-json-server.typicode.com/tinchol12/productos/"});var g=function(){return{type:"AGREGAR_PRODUCTO"}},I=function(e){return{type:"AGREGAR_PRODUCTO_EXITO",payload:e}},h=function(e){return{type:"AGREGAR_PRODUCTO_ERROR"}};var y=function(){return{type:"COMENZAR_DESCARGA_PRODUCTOS"}},N=function(e){return{type:"DESCARGA_PRODUCTOS_EXITOSA",payload:e}},C=function(){return{type:"DESCARGA_PRODUCTOS_ERROR"}};var j=function(){return{type:"OBTENER_PRODUCTO_ELIMINAR"}},P=function(e){return{type:"PRODUCTO_ELIMINADO_EXITO",payload:e}},U=function(){return{type:"PRODUCTO_ELIMINADO_ERROR"}};var L=function(){return{type:"OBTENER_PRODUCTO_EDITAR"}},w=function(e){return{type:"PRODUCTO_EDITAR_EXITO",payload:e}},x=function(){return{type:"PRODUCTO_EDITAR_ERROR"}};var S=function(){return{type:"COMENZAR_EDICION_PRODUCTO"}},G=function(e){return{type:"PRODUCTO_EDITADO_EXITO",payload:e}},X=function(){return{type:"PRODUCTO_EDITADO_EXITO"}},M=function(e){var t=e.producto,r=Object(i.b)(),n=function(e){D.a.fire({title:"Esta seguro de querer eliminar?",text:"Producto eliminado no puede ser restaurado",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminar!",cancelButtonText:"Cancelar"}).then((function(t){t.value&&(D.a.fire("Eliminado!","El libro ha sido eliminado corretamente","success"),console.log(e),r(function(e){return function(t){t(j()),v.delete("/libros/".concat(e)).then((function(r){console.log(r),t(P(e)),D.a.fire("Almacenado","El Producto se Actualiz\xf3 correctamente","success")})).catch((function(e){console.log(e),t(U())}))}}(e)))}))};return a.a.createElement("tr",null,a.a.createElement("td",null,t.nombre),a.a.createElement("td",null,a.a.createElement("span",{className:"font-weight-bold"},"$ ",t.precio)),a.a.createElement("td",{className:"acciones"},a.a.createElement(l.b,{to:"/productos/editar/".concat(t.id),className:"btn btn-primary mr-2"},"Editar"),a.a.createElement("button",{className:"btn btn-danger",onClick:function(){return n(t.id)}},"Eliminar")))},k=function(){var e=Object(i.b)();Object(n.useEffect)((function(){e((function(e){e(y()),v.get("/libros").then((function(t){e(N(t.data))})).catch((function(t){console.log(t),e(C())}))}))}),[]);var t=Object(i.c)((function(e){return e.productos.loading})),r=Object(i.c)((function(e){return e.productos.error})),o=Object(i.c)((function(e){return e.productos.productos}));return a.a.createElement(a.a.Fragment,null,r?a.a.createElement("div",{className:"font-weight-bold alert alert-danger text-center mt-4"},"Hubo un error"):null,a.a.createElement("h2",{className:"text-center my-5"},"Listado de Productos"),a.a.createElement("table",{className:"table table-striped"},a.a.createElement("thead",{className:"bg-primary table-dark"},a.a.createElement("tr",null,a.a.createElement("th",{scope:"col"},"Nombre"),a.a.createElement("th",{scope:"col"},"Precio"),a.a.createElement("th",{scope:"col"},"Acciones"))),a.a.createElement("tbody",null,o.map((function(e){return a.a.createElement(M,{key:e.id,producto:e})})))),t?"Cargando...":null)},V=r(22);function B(){return function(e){e(F())}}var F=function(){return{type:"VALIDAR_FORMULARIO"}},Z=function(e){var t=e.history,r=Object(n.useState)(""),o=Object(V.a)(r,2),c=o[0],l=o[1],u=Object(n.useState)(""),s=Object(V.a)(u,2),d=s[0],m=s[1],O=Object(i.b)(),E=function(e){return O(function(e){return function(t){t(g()),v.post("/libros",e).then((function(r){console.log(r),t(I(e))})).catch((function(e){console.log(e),t(h())}))}}(e))},R=Object(i.c)((function(e){return e.error.error}));return a.a.createElement("div",{className:"row justify-content-center mt-5"},a.a.createElement("div",{className:"col-md-8"},a.a.createElement("div",{className:"card"},a.a.createElement("div",{className:"card-body"},a.a.createElement("h2",{className:"text-center mb-4 font-weight-bold "},"Agregar Nuevo Libro"),a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),O(B()),""!==c.trim()&&""!==d.trim()?(O({type:"VALIDAR_FORMULARIO_EXITO"}),E({nombre:c,precio:d}),t.push("/")):O({type:"VALIDAR_FORMULARIO_ERROR"})}},a.a.createElement("div",{className:"form-group"},a.a.createElement("label",null,"Nombre Libro"),a.a.createElement("input",{type:"text",className:"form-control",placeholder:"Nombre Libro",value:c,onChange:function(e){return l(e.target.value)}})),a.a.createElement("div",{className:"form-group"},a.a.createElement("label",null,"Precio Libro"),a.a.createElement("input",{type:"text",className:"form-control",placeholder:"Precio Libro",value:d,onChange:function(e){return m(e.target.value)}})),a.a.createElement("button",{type:"submit",className:"btn btn-primary font-weight-bold text-uppercase d-block w-100"},"Agregar")),R?a.a.createElement("div",{className:"font-weight-bold alert alert-danger text-center mt-4"}," Todos los campos son obligatorios"):null))))},H=function(e){var t=e.match,r=e.history,o=Object(n.useRef)(""),c=Object(n.useRef)(""),l=Object(i.b)(),u=function(e){return l(function(e){return function(t){t(S()),v.put("/libros/".concat(e.id),e).then((function(e){t(G(e.data))})).catch((function(e){t(X())}))}}(e))},s=t.params.id;Object(n.useEffect)((function(){l(function(e){return function(t){t(L()),v.get("/libros/".concat(e)).then((function(e){t(w(e.data)),console.log(e.data)})).catch((function(e){console.log(e),t(x())}))}}(s))}),[l,s]);var d=Object(i.c)((function(e){return e.productos.producto})),m=Object(i.c)((function(e){return e.productos.error}));if(!d)return"Cargando...";return a.a.createElement(n.Fragment,null,m?a.a.createElement("div",{className:"font-weight-bold alert alert-danger text-center mt-4"}," Hubo un error, intenta de nuevo "):a.a.createElement("div",{className:"row justify-content-center mt-5"},a.a.createElement("div",{className:"col-md-8"},a.a.createElement("div",{className:"card"},a.a.createElement("div",{className:"card-body"},a.a.createElement("h2",{className:"text-center"},"Editar Producto"),a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),l(B()),""!==o.current.value.trim()&&""!==c.current.value.trim()?(l({type:"VALIDAR_FORMULARIO_EXITO"}),console.log(o.current.value),u({id:s,nombre:o.current.value,precio:c.current.value}),r.push("/")):l({type:"VALIDAR_FORMULARIO_ERROR"})}},a.a.createElement("div",{className:"form-group"},a.a.createElement("label",null,"Titulo"),a.a.createElement("input",{type:"text",className:"form-control",placeholder:"Titulo",defaultValue:d.nombre,ref:o})),a.a.createElement("div",{className:"form-group"},a.a.createElement("label",null,"Precio del Producto"),a.a.createElement("input",{type:"text",className:"form-control",placeholder:"Precio",defaultValue:d.precio,ref:c})),a.a.createElement("button",{type:"submit",className:"btn btn-primary font-weight-bold text-uppercase d-block w-100"},"Guardar Cambios")))))))};var J=function(){return a.a.createElement(l.a,null,a.a.createElement(i.a,{store:f},a.a.createElement(_,null),a.a.createElement("div",{className:"container"},a.a.createElement(u.c,null,a.a.createElement(u.a,{exact:!0,path:"/",component:k}),a.a.createElement(u.a,{exact:!0,path:"/productos/nuevo",component:Z}),a.a.createElement(u.a,{exact:!0,path:"/productos/editar/:id",component:H})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[38,1,2]]]);
//# sourceMappingURL=main.d89b922f.chunk.js.map